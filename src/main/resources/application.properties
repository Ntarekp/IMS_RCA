# Application Name
spring.application.name=School Inventory Management System

# need to be set in dev environment
spring.profiles.active=dev

# Server Configuration
# Using default 8080 if not specified, mapped to 8081 by Docker if needed
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${SERVER_CONTEXT_PATH:/ims}

# CORS Configuration
# Supporting both local dev and hoster environment via env var
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:*,http://localhost:3000,http://10.12.72.9:8080}

app.frontend.url=${FRONTEND_URL:http://localhost:5173}
app.file.upload-dir=${FILE_UPLOAD_DIR:/var/ims/uploads}

# Database Configuration (for production-use)
# Using DB_URL/USER/PASS as requested, with fallbacks to old env vars or localhost defaults
spring.datasource.url=${DB_URL:${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/inventory_db}}
spring.datasource.username=${DB_USER:${SPRING_DATASOURCE_USERNAME:invuser}}
spring.datasource.password=${DB_PASS:${SPRING_DATASOURCE_PASSWORD:In7yt4UsArP#ss}}
spring.datasource.driver-class-name=org.postgresql.Driver

classpath.resource.loader.class=org.springframework.boot.devtools.restart.classloader.RestartClassLoader

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false

# JWT Configuration
# Using env var for secret (security best practice), fallback to default if missing
jwt.secret=${JWT_SECRET:ht5TZgosNwAsNRLbRUCurxS9FG5TLyVKRqovve59+dw=}
jwt.expiration=${JWT_EXPIRATION:86400000}

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Email Configuration
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${SMTP_USER:${MAIL_USERNAME:ntarekayitare@gmail.com}}
# App Password (spaces removed for compatibility)
spring.mail.password=${SMTP_PASS:${MAIL_PASSWORD:yboudusmnczyiajl}}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.debug=${MAIL_DEBUG:false}
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.default-encoding=UTF-8

# Logging
logging.level.root=${LOGGING_LEVEL_ROOT:INFO}
logging.level.npk.rca.ims=${LOGGING_LEVEL_APP:INFO}
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false
